const translations = {
  ru: {
    page_title: "Helaney",
    nav_home: "Ð“Ð»Ð°Ð²Ð½Ð°Ñ",
    nav_projects: "ÐŸÑ€Ð¾ÐµÐºÑ‚Ñ‹",
    nav_contacts: "ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹",
    home_name: "Helaney",
    home_title: "ÐÐ°Ñ‡Ð¸Ð½Ð°ÑŽÑ‰Ð¸Ð¹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº",
    home_desc: "Ð¡Ð²ÐµÐ¶ÐµÐ¸ÑÐ¿ÐµÑ‡Ñ‘Ð½Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸ÑÑ‚. Ð¡Ð¿ÐµÑ†Ð¸Ð°Ð»Ð¸Ð·Ð¸Ñ€ÑƒÑŽÑÑŒ Ð½Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ð¿Ñ€Ð¾ÑÑ‚Ñ‹Ñ… Discord Ð±Ð¾Ñ‚Ð¾Ð² Ð¸ Ð½ÐµÑ‚Ñ€ÑƒÐ´Ð½Ñ‹Ñ… Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼.",
    projects_title: "ÐŸÑ€Ð¾ÐµÐºÑ‚Ñ‹",
    cont_projects_title: "Ð£Ñ‡Ð°ÑÑ‚Ð²ÑƒÑŽ Ð² Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°Ñ…",
    my_projects_title: "ÐœÐ¾Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñ‹",
    project_pixel_name: "Pixel",
    project_pixel_desc: "Ð£ÑÑ‚Ð°Ñ€ÐµÐ²ÑˆÐ¸Ð¹ Discord Ð±Ð¾Ñ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¼Ð¾Ð³ Ð¼Ð¾Ð´ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð²Ð°ÑˆÐ¸ ÑÐµÑ€Ð²ÐµÑ€Ð° Ð¸ Ñ€Ð°Ð·Ð²Ð»ÐµÐºÐ°Ñ‚ÑŒ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð².",
    project_mayson_name: "Mayson",
    project_mayson_desc: "Ð£ÑÑ‚Ð°Ñ€ÐµÐ²ÑˆÐ¸Ð¹ Discord Ð±Ð¾Ñ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ ÑÐ²Ð»ÑÐ»ÑÑ Ð±Ð¾Ð»ÐµÐµ Ð´ÐµÐ³Ñ€Ð¾Ð¸Ð´Ð½Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸ÐµÐ¹ Pixel.",
    project_yoro_name: "Yoro",
    project_yoro_desc: "Ð§Ð°Ñ‚-Ð±Ð¾Ñ‚ Ð´Ð»Ñ Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ†Ð¸Ð¸, Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚ÑŒÑŽ, Ñ€Ð°Ð·Ð²Ð»ÐµÑ‡ÐµÐ½Ð¸Ð¹ Ð¸ Ð³Ð¸Ð±ÐºÐ¸Ñ… Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐº â€“ Ð²Ð°Ñˆ Ð¸Ð´ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº Ð½Ð° Discord.",
    project_helanova_name: "Helanova Team",
    project_helanova_desc: "ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° Ð¿Ð¾ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Discord Ð±Ð¾Ñ‚Ð¾Ð², Ð¸Ð³Ñ€ Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹. Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ ÑÐ²Ð¾Ð¹ Ð¿ÑƒÑ‚ÑŒ Ð² ÑÑ‚Ð¾Ð¹ Ð¸Ð½Ð´ÑƒÑÑ‚Ñ€Ð¸Ð¸.",
    project_heypers_desc: "ÐœÑƒÐ»ÑŒÑ‚Ð¸Ð¿Ñ€Ð¾ÐµÐºÑ‚, Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÑÑŽÑ‰Ð¸Ð¹ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ, Ð¼ÐµÐ½ÐµÐ´Ð¶Ð¼ÐµÐ½Ñ‚, Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ†Ð¸ÑŽ Ð¸ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÑƒ.",
    more_details: "ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ â†’",
    contacts_title: "ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹",
    email_title: "Email",
    availability: "Ð”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ÑÑ‚ÑŒ",
    availability_time: "ÐŸÐ½-ÐŸÑ‚, 11:00 â€“ 18:00",
    modal_title: "ðŸ’” ÐžÐ¹-Ð¾Ð¹!",
    private_project: "Ð­Ñ‚Ð¾Ñ‚ Ð¿Ñ€Ð¾ÐµÐºÑ‚ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¼ Ð¸ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½ Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð½Ð° Github, Ð½Ð¾ ÑƒÐ¶Ðµ ÑÐºÐ¾Ñ€Ð¾ ÑÑ‚Ð°Ð½ÐµÑ‚ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ð¼!",
    footer_text: "Â© 2025, ÑÐ´ÐµÐ»Ð°Ð½Ð¾ Ñ â¤ï¸ Helaney.",
    telegram: "Telegram",
    github: "GitHub"
  },
  en: {
    page_title: "Helaney",
    nav_home: "Home",
    nav_projects: "Projects",
    nav_contacts: "Contacts",
    home_name: "Helaney",
    home_title: "Junior developer",
    home_desc: "Fresh-baked programmer. I specialize in creating simple Discord bots and easy programs.",
    projects_title: "Projects",
    cont_projects_title: "Contribute in projects",
    my_projects_title: "My projects",
    project_pixel_name: "Pixel",
    project_pixel_desc: "Outdated Discord bot that could moderate your servers and entertain members.",
    project_mayson_name: "Mayson",
    project_mayson_desc: "Outdated Discord bot that was a more degraded version of Pixel.",
    project_yoro_name: "Yoro",
    project_yoro_desc: "Chat bot for moderation, AI image generation, entertainment and flexible settings - your ultimate Discord assistant.",
    project_helanova_name: "Helanova Team",
    project_helanova_desc: "A team developing Discord bots, games and applications. Just starting out in this industry.",
    project_heypers_desc: "A multi-project combining management, administration, moderation and development.",
    more_details: "Details â†’",
    contacts_title: "Contacts",
    email_title: "Email",
    availability: "Availability",
    availability_time: "Mon-Fri, 11:00 AM â€“ 6:00 PM",
    modal_title: "ðŸ’” Oops!",
    private_project: "This project is private and not available for viewing on Github, but will be public soon!",
    footer_text: "Â© 2025, made with â¤ï¸ by Helaney.",
    telegram: "Telegram",
    github: "GitHub"
  }
};

// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð°
function initLanguageSwitcher() {
  const langBtn = document.getElementById('lang-btn');
  if (!langBtn) return;

  // ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ·Ñ‹Ðº Ð¸Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ Ñ€ÑƒÑÑÐºÐ¸Ð¹ Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ
  let currentLang = localStorage.getItem('appLanguage') || 'ru';

  // Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¿Ñ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð¾Ð²
  function applyTranslations(lang) {
    // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð²ÑÐµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ Ð°Ñ‚Ñ€Ð¸Ð±ÑƒÑ‚Ð¾Ð¼ data-i18n
    document.querySelectorAll('[data-i18n]').forEach(element => {
      const key = element.getAttribute('data-i18n');
      if (translations[lang] && translations[lang][key]) {
        element.textContent = translations[lang][key];
      }
    });

    // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ñ„Ð»Ð°Ð³ Ð½Ð° ÐºÐ½Ð¾Ð¿ÐºÐµ
    const flagElement = langBtn.querySelector('.flag');
    if (flagElement) {
      flagElement.textContent = lang === 'ru' ? 'ðŸ‡·ðŸ‡º' : 'ðŸ‡¬ðŸ‡§';
    }

    // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ title ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ñ‹
    document.title = translations[lang].page_title;
  }

  // ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº ÐºÐ»Ð¸ÐºÐ° Ð¿Ð¾ ÐºÐ½Ð¾Ð¿ÐºÐµ
  langBtn.addEventListener('click', () => {
    // ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ ÑÐ·Ñ‹Ðº
    currentLang = currentLang === 'ru' ? 'en' : 'ru';
    
    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ð² localStorage
    localStorage.setItem('appLanguage', currentLang);
    
    // ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´
    applyTranslations(currentLang);
  });

  // ÐŸÑ€Ð¸Ð¼ÐµÐ½ÑÐµÐ¼ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´ Ð¿Ñ€Ð¸ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐµ
  applyTranslations(currentLang);
}

// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ñ‹Ñ… Ð¾ÐºÐ¾Ð½
function initModals() {
  document.querySelectorAll('.more[data-modal]').forEach(trigger => {
    trigger.addEventListener('click', function(e) {
      e.preventDefault();
      const modalId = this.dataset.modal;
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';
      }
    });
  });

  document.querySelectorAll('.close, .modal').forEach(el => {
    el.addEventListener('click', function() {
      document.querySelectorAll('.modal').forEach(m => {
        m.style.display = 'none';
      });
      document.body.style.overflow = 'auto';
    });
  });
}

// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÐºÐ½Ð¾Ð¿ÐºÐ¸ "ÐÐ°Ð²ÐµÑ€Ñ…"
function initBackToTop() {
  const backToTopBtn = document.getElementById('back-to-top');
  if (!backToTopBtn) return;

  let lastScrollPosition = 0;
  let scrollDirection = 'down';
  let animationFrame;

  function handleScroll() {
    const currentScroll = window.pageYOffset;
    scrollDirection = currentScroll > lastScrollPosition ? 'down' : 'up';
    lastScrollPosition = currentScroll;

    if (currentScroll > 300) {
      backToTopBtn.classList.add('visible');
      if (scrollDirection === 'up') {
        backToTopBtn.classList.add('animated');
      } else {
        backToTopBtn.classList.remove('animated');
      }
    } else {
      backToTopBtn.classList.remove('visible', 'animated');
    }
    
    animationFrame = requestAnimationFrame(handleScroll);
  }

  backToTopBtn.addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });

  window.addEventListener('scroll', () => {
    cancelAnimationFrame(animationFrame);
    animationFrame = requestAnimationFrame(handleScroll);
  }, { passive: true });
}

// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð»Ð¸Ð¿ÐºÐ¾Ð³Ð¾ Ñ…ÐµÐ´ÐµÑ€Ð°
function initStickyHeader() {
  const header = document.querySelector('header');
  if (!header) return;

  window.addEventListener('scroll', () => {
    if (window.scrollY > 100) {
      header.classList.add('sticky');
    } else {
      header.classList.remove('sticky');
    }
  });
}

// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð²ÑÐµÑ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ Ð¿Ð¾ÑÐ»Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ DOM
document.addEventListener('DOMContentLoaded', () => {
  initLanguageSwitcher();
  initModals();
  initBackToTop();
  initStickyHeader();

  // Ð’Ñ‹Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ Pixel
  const pixelCard = Array.from(document.querySelectorAll('.card')).find(card => {
    const title = card.querySelector('h3');
    return title && title.textContent.trim() === 'Pixel';
  });
  
  if (pixelCard) {
    pixelCard.classList.add('highlight-pixel');
  }
});